---
network: "postgres-net" # Docker network to talk to postgres

oidc:
  client_id: ""
  client_secret: ""
  digest: ""
  redirect_uris:
    - "https://{{ expanded_url }}/oauth2/oidc/callback"

postgres:
  image: "postgres:15-alpine"
  db: ""
  user: ""
  password: ""
  location: "{{ location.docker_data }}/{{ service_directory }}/db"

miniflux_options:
  - DATABASE_URL: "postgres://{{ postgres.user }}:{{ postgres.password }}@{{ service_directory }}-postgres/{{ postgres.db }}?sslmode=disable"
  - BASE_URL: "https://{{ expanded_url }}"
  - RUN_MIGRATIONS: "1"
  - OAUTH2_PROVIDER: "oidc"
  - OAUTH2_CLIENT_ID: "{{ oidc.client_id }}"
  - OAUTH2_CLIENT_SECRET: "{{ oidc.client_secret }}"
  - OAUTH2_REDIRECT_URL: "{{ oidc.redirect_uris[0] }}"
  - OAUTH2_OIDC_DISCOVERY_ENDPOINT: "https://{{ urls.authelia.sub }}.{{ base_tld }}"
  - OAUTH2_USER_CREATION: "0"
